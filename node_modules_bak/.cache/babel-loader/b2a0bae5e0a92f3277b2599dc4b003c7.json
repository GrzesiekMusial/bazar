{"ast":null,"code":"import { apiClient as client } from \"./client\";\nimport jwtDecode from \"jwt-decode\";\nconst endpoint = \"/auth\";\n\nconst login = body => client.post(endpoint, body);\n\nlet name;\n\nconst getUser = (token = localStorage.getItem(\"token\")) => {\n  if (name) return name;\n\n  try {\n    const user = jwtDecode(token);\n    console.log(\"user\", user);\n    name = user;\n    return user;\n  } catch (ex) {\n    console.log(\"efef\");\n    return null;\n  }\n};\n\nconst setToken = (token = localStorage.getItem(\"token\")) => {\n  client.setHeader(\"x-auth-token\", token);\n};\n\nconst logout = () => {\n  localStorage.removeItem(\"token\");\n  window.location = \"/login\";\n};\n\nexport { login, getUser, setToken, logout };","map":{"version":3,"sources":["C:/dev/TESTY/TEST NATIVE/bazar/src/services/auth.js"],"names":["apiClient","client","jwtDecode","endpoint","login","body","post","name","getUser","token","localStorage","getItem","user","console","log","ex","setToken","setHeader","logout","removeItem","window","location"],"mappings":"AAAA,SAASA,SAAS,IAAIC,MAAtB,QAAoC,UAApC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AAEA,MAAMC,QAAQ,GAAG,OAAjB;;AAEA,MAAMC,KAAK,GAAIC,IAAD,IAAUJ,MAAM,CAACK,IAAP,CAAYH,QAAZ,EAAsBE,IAAtB,CAAxB;;AAEA,IAAIE,IAAJ;;AAEA,MAAMC,OAAO,GAAG,CAACC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAT,KAA2C;AACvD,MAAIJ,IAAJ,EAAU,OAAOA,IAAP;;AACV,MAAI;AACA,UAAMK,IAAI,GAAGV,SAAS,CAACO,KAAD,CAAtB;AACAI,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBF,IAApB;AACAL,IAAAA,IAAI,GAAGK,IAAP;AACA,WAAOA,IAAP;AACH,GALD,CAKE,OAAOG,EAAP,EAAW;AACTF,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,WAAO,IAAP;AACH;AACJ,CAXD;;AAaA,MAAME,QAAQ,GAAG,CAACP,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAT,KAA2C;AACxDV,EAAAA,MAAM,CAACgB,SAAP,CAAiB,cAAjB,EAAiCR,KAAjC;AACH,CAFD;;AAIA,MAAMS,MAAM,GAAG,MAAM;AACjBR,EAAAA,YAAY,CAACS,UAAb,CAAwB,OAAxB;AACAC,EAAAA,MAAM,CAACC,QAAP,GAAkB,QAAlB;AACH,CAHD;;AAKA,SAASjB,KAAT,EAAgBI,OAAhB,EAAyBQ,QAAzB,EAAmCE,MAAnC","sourcesContent":["import { apiClient as client } from \"./client\";\r\nimport jwtDecode from \"jwt-decode\";\r\n\r\nconst endpoint = \"/auth\";\r\n\r\nconst login = (body) => client.post(endpoint, body);\r\n\r\nlet name;\r\n\r\nconst getUser = (token = localStorage.getItem(\"token\")) => {\r\n    if (name) return name;\r\n    try {\r\n        const user = jwtDecode(token);\r\n        console.log(\"user\", user);\r\n        name = user;\r\n        return user;\r\n    } catch (ex) {\r\n        console.log(\"efef\");\r\n        return null;\r\n    }\r\n};\r\n\r\nconst setToken = (token = localStorage.getItem(\"token\")) => {\r\n    client.setHeader(\"x-auth-token\", token);\r\n};\r\n\r\nconst logout = () => {\r\n    localStorage.removeItem(\"token\");\r\n    window.location = \"/login\";\r\n};\r\n\r\nexport { login, getUser, setToken, logout };\r\n"]},"metadata":{},"sourceType":"module"}