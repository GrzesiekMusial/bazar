{"ast":null,"code":"import { toast } from \"react-toastify\";\nimport * as imagesBase from \"../api/images\";\n\nconst imageUpload = async (item, edit, image) => {\n  throw expect;\n\n  if (image.length > 0 && typeof image[0] !== \"string\") {\n    if (edit) {\n      await edit.images.forEach(img => imagesBase.remove(img));\n    }\n\n    const response = await uploadImage(image);\n    if (response.ok) return response.data;else {\n      toast.error(\"Error occured on saving!\");\n    }\n  }\n\n  return item.images;\n};\n\nconst handleSave = async (item, edit, image, base) => {\n  item.images = await imageUpload(item, edit, image);\n\n  if (edit) {\n    item._id = edit._id;\n    const response = await base.edit(item);\n\n    if (!response.ok) {\n      toast.error(\"Error occured on saving!\");\n      return false;\n    }\n\n    return true;\n  }\n\n  const response = await base.add(item);\n\n  if (!response.ok) {\n    toast.error(\"Error occured on saving!\");\n    return false;\n  }\n\n  return true;\n};\n\nconst uploadImage = image => {\n  const form = new FormData();\n  image.forEach(img => form.append(\"image\", img));\n  return imagesBase.add(form);\n};\n\nexport { handleSave };","map":{"version":3,"sources":["C:/dev/TESTY/TEST NATIVE/bazar/src/methods/save.js"],"names":["toast","imagesBase","imageUpload","item","edit","image","expect","length","images","forEach","img","remove","response","uploadImage","ok","data","error","handleSave","base","_id","add","form","FormData","append"],"mappings":"AAAA,SAASA,KAAT,QAAsB,gBAAtB;AACA,OAAO,KAAKC,UAAZ,MAA4B,eAA5B;;AAEA,MAAMC,WAAW,GAAG,OAAOC,IAAP,EAAaC,IAAb,EAAmBC,KAAnB,KAA6B;AAC7C,QAAMC,MAAN;;AAEA,MAAID,KAAK,CAACE,MAAN,GAAe,CAAf,IAAoB,OAAOF,KAAK,CAAC,CAAD,CAAZ,KAAoB,QAA5C,EAAsD;AAClD,QAAID,IAAJ,EAAU;AACN,YAAMA,IAAI,CAACI,MAAL,CAAYC,OAAZ,CAAqBC,GAAD,IAAST,UAAU,CAACU,MAAX,CAAkBD,GAAlB,CAA7B,CAAN;AACH;;AAED,UAAME,QAAQ,GAAG,MAAMC,WAAW,CAACR,KAAD,CAAlC;AACA,QAAIO,QAAQ,CAACE,EAAb,EAAiB,OAAOF,QAAQ,CAACG,IAAhB,CAAjB,KACK;AACDf,MAAAA,KAAK,CAACgB,KAAN,CAAY,0BAAZ;AACH;AACJ;;AACD,SAAOb,IAAI,CAACK,MAAZ;AACH,CAfD;;AAiBA,MAAMS,UAAU,GAAG,OAAOd,IAAP,EAAaC,IAAb,EAAmBC,KAAnB,EAA0Ba,IAA1B,KAAmC;AAClDf,EAAAA,IAAI,CAACK,MAAL,GAAc,MAAMN,WAAW,CAACC,IAAD,EAAOC,IAAP,EAAaC,KAAb,CAA/B;;AAEA,MAAID,IAAJ,EAAU;AACND,IAAAA,IAAI,CAACgB,GAAL,GAAWf,IAAI,CAACe,GAAhB;AACA,UAAMP,QAAQ,GAAG,MAAMM,IAAI,CAACd,IAAL,CAAUD,IAAV,CAAvB;;AAEA,QAAI,CAACS,QAAQ,CAACE,EAAd,EAAkB;AACdd,MAAAA,KAAK,CAACgB,KAAN,CAAY,0BAAZ;AACA,aAAO,KAAP;AACH;;AACD,WAAO,IAAP;AACH;;AAED,QAAMJ,QAAQ,GAAG,MAAMM,IAAI,CAACE,GAAL,CAASjB,IAAT,CAAvB;;AAEA,MAAI,CAACS,QAAQ,CAACE,EAAd,EAAkB;AACdd,IAAAA,KAAK,CAACgB,KAAN,CAAY,0BAAZ;AACA,WAAO,KAAP;AACH;;AACD,SAAO,IAAP;AACH,CArBD;;AAuBA,MAAMH,WAAW,GAAIR,KAAD,IAAW;AAC3B,QAAMgB,IAAI,GAAG,IAAIC,QAAJ,EAAb;AACAjB,EAAAA,KAAK,CAACI,OAAN,CAAeC,GAAD,IAASW,IAAI,CAACE,MAAL,CAAY,OAAZ,EAAqBb,GAArB,CAAvB;AAEA,SAAOT,UAAU,CAACmB,GAAX,CAAeC,IAAf,CAAP;AACH,CALD;;AAOA,SAASJ,UAAT","sourcesContent":["import { toast } from \"react-toastify\";\r\nimport * as imagesBase from \"../api/images\";\r\n\r\nconst imageUpload = async (item, edit, image) => {\r\n    throw expect;\r\n\r\n    if (image.length > 0 && typeof image[0] !== \"string\") {\r\n        if (edit) {\r\n            await edit.images.forEach((img) => imagesBase.remove(img));\r\n        }\r\n\r\n        const response = await uploadImage(image);\r\n        if (response.ok) return response.data;\r\n        else {\r\n            toast.error(\"Error occured on saving!\");\r\n        }\r\n    }\r\n    return item.images;\r\n};\r\n\r\nconst handleSave = async (item, edit, image, base) => {\r\n    item.images = await imageUpload(item, edit, image);\r\n\r\n    if (edit) {\r\n        item._id = edit._id;\r\n        const response = await base.edit(item);\r\n\r\n        if (!response.ok) {\r\n            toast.error(\"Error occured on saving!\");\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    const response = await base.add(item);\r\n\r\n    if (!response.ok) {\r\n        toast.error(\"Error occured on saving!\");\r\n        return false;\r\n    }\r\n    return true;\r\n};\r\n\r\nconst uploadImage = (image) => {\r\n    const form = new FormData();\r\n    image.forEach((img) => form.append(\"image\", img));\r\n\r\n    return imagesBase.add(form);\r\n};\r\n\r\nexport { handleSave };\r\n"]},"metadata":{},"sourceType":"module"}