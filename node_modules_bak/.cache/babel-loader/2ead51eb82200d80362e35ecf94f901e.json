{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\dev\\\\TESTY\\\\TEST NATIVE\\\\bazar\\\\src\\\\app\\\\components\\\\shop\\\\productDetails.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport ImageSlider from \"../common/imageSlider\";\nimport AcceptModal from \"../common/modal\";\nimport * as Forms from \"../common/form/forms\";\nimport * as time from \"../../../methods/time\";\nimport * as base from \"../../../methods/data\";\nimport { NavLink } from \"react-router-dom\";\nimport Spinner from \"./../common/spinner\";\nimport { useHistory } from \"react-router-dom\";\n\nfunction ProductDetails(props) {\n  _s();\n\n  const {\n    user,\n    renderImage,\n    title,\n    match\n  } = props;\n  const [card, setCard] = useState(null);\n  const [modal, setModal] = useState(false);\n  const [load, setLoad] = useState(true);\n  const history = useHistory();\n  useEffect(async () => {\n    if (!(await base.getOneProduct(match.params.id, setCard, null))) history.push(\"/bazar\");\n    setLoad(false);\n  }, []);\n  useEffect(() => {\n    if (card) title(card.title);\n  }, [card]);\n\n  const handleDelete = async card => {\n    await base.productDelete(card);\n    setModal(false);\n    history.push(\"/bazar\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"screen\",\n    children: [load && /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 22\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => history.goBack(),\n      children: /*#__PURE__*/_jsxDEV(Forms.Back, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), card && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"screen__container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"productDetails__image\",\n        children: /*#__PURE__*/_jsxDEV(ImageSlider, {\n          images: card.images,\n          handleClick: (i, index, arr) => renderImage(arr, index)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"productDetails__details\",\n        children: [card.author && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: card.author.login ? card.author.login : \"Undefined\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: time.getDate(card.date)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }, this), card.price !== 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"productDetails__image--price\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [card.price, \" z\\u0142\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"productDetails__text\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\" \", card.text]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: card.author && card.author.phone && /*#__PURE__*/_jsxDEV(\"a\", {\n          href: `tel:${card.author.phone}`,\n          children: \"CLICK TO CALL\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }, this), modal && /*#__PURE__*/_jsxDEV(AcceptModal, {\n        close: setModal,\n        accept: () => handleDelete(card),\n        title: `Potwierdź operację usunięcia ${card.title}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 25\n      }, this), card.author && user && user._id === card.author._id && !modal && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"productDetails__buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"actionBtn edit\",\n          onClick: () => history.push(`edit/${card._id}`),\n          children: \"EDYTUJ\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"actionBtn delete\",\n          onClick: () => setModal(true),\n          children: \"USU\\u0143\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ProductDetails, \"tH+O+HQ9x68IvgipCwmRqNRU1sY=\", false, function () {\n  return [useHistory];\n});\n\n_c = ProductDetails;\nexport default ProductDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductDetails\");","map":{"version":3,"sources":["C:/dev/TESTY/TEST NATIVE/bazar/src/app/components/shop/productDetails.jsx"],"names":["React","useEffect","useState","ToastContainer","ImageSlider","AcceptModal","Forms","time","base","NavLink","Spinner","useHistory","ProductDetails","props","user","renderImage","title","match","card","setCard","modal","setModal","load","setLoad","history","getOneProduct","params","id","push","handleDelete","productDelete","goBack","images","i","index","arr","author","login","getDate","date","price","text","phone","_id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport ImageSlider from \"../common/imageSlider\";\r\nimport AcceptModal from \"../common/modal\";\r\n\r\nimport * as Forms from \"../common/form/forms\";\r\nimport * as time from \"../../../methods/time\";\r\nimport * as base from \"../../../methods/data\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport Spinner from \"./../common/spinner\";\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction ProductDetails(props) {\r\n    const { user, renderImage, title, match } = props;\r\n    const [card, setCard] = useState(null);\r\n    const [modal, setModal] = useState(false);\r\n    const [load, setLoad] = useState(true);\r\n    const history = useHistory();\r\n\r\n    useEffect(async () => {\r\n        if (!(await base.getOneProduct(match.params.id, setCard, null)))\r\n            history.push(\"/bazar\");\r\n        setLoad(false);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (card) title(card.title);\r\n    }, [card]);\r\n\r\n    const handleDelete = async (card) => {\r\n        await base.productDelete(card);\r\n        setModal(false);\r\n        history.push(\"/bazar\");\r\n    };\r\n\r\n    return (\r\n        <div className=\"screen\">\r\n            {load && <Spinner />}\r\n\r\n            {/* <NavLink\r\n                to={{\r\n                    pathname: \"/bazar\",\r\n                    state: history.location.state,\r\n                }}\r\n            > */}\r\n            <button onClick={() => history.goBack()}>\r\n                <Forms.Back />\r\n            </button>\r\n            {/* </NavLink> */}\r\n            <ToastContainer />\r\n            {card && (\r\n                <div className=\"screen__container\">\r\n                    <div className=\"productDetails__image\">\r\n                        <ImageSlider\r\n                            images={card.images}\r\n                            handleClick={(i, index, arr) =>\r\n                                renderImage(arr, index)\r\n                            }\r\n                        />\r\n                    </div>\r\n                    <div className=\"productDetails__details\">\r\n                        {card.author && (\r\n                            <p>\r\n                                {card.author.login\r\n                                    ? card.author.login\r\n                                    : \"Undefined\"}\r\n                            </p>\r\n                        )}\r\n                        <p>{time.getDate(card.date)}</p>\r\n                    </div>\r\n                    {card.price !== 0 && (\r\n                        <div className=\"productDetails__image--price\">\r\n                            <span>{card.price} zł</span>\r\n                        </div>\r\n                    )}\r\n                    <div className=\"productDetails__text\">\r\n                        <p> {card.text}</p>\r\n                    </div>\r\n                    <div className=\"\">\r\n                        {card.author && card.author.phone && (\r\n                            <a href={`tel:${card.author.phone}`}>\r\n                                CLICK TO CALL\r\n                            </a>\r\n                        )}\r\n                    </div>\r\n\r\n                    {modal && (\r\n                        <AcceptModal\r\n                            close={setModal}\r\n                            accept={() => handleDelete(card)}\r\n                            title={`Potwierdź operację usunięcia ${card.title}`}\r\n                        />\r\n                    )}\r\n                    {card.author &&\r\n                        user &&\r\n                        user._id === card.author._id &&\r\n                        !modal && (\r\n                            <div className=\"productDetails__buttons\">\r\n                                <button\r\n                                    className=\"actionBtn edit\"\r\n                                    onClick={() =>\r\n                                        history.push(`edit/${card._id}`)\r\n                                    }\r\n                                >\r\n                                    EDYTUJ\r\n                                </button>\r\n                                <button\r\n                                    className=\"actionBtn delete\"\r\n                                    onClick={() => setModal(true)}\r\n                                >\r\n                                    USUŃ\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ProductDetails;\r\n"]},"metadata":{},"sourceType":"module"}