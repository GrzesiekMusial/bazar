{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\dev\\\\TESTY\\\\TEST NATIVE\\\\bazar\\\\src\\\\app\\\\components\\\\shop\\\\productDetails.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport ImageSlider from \"../common/imageSlider\";\nimport AcceptModal from \"../common/modal\";\nimport * as Forms from \"../common/form/forms\";\nimport * as time from \"../../../methods/time\";\nimport * as base from \"../../../methods/data\";\nimport { NavLink } from \"react-router-dom\";\nimport Spinner from \"./../common/spinner\";\nimport { useHistory } from \"react-router-dom\";\nimport config from \"../../config/config.json\";\n\nfunction ProductDetails(props) {\n  _s();\n\n  const {\n    user,\n    renderImage,\n    title,\n    match,\n    history\n  } = props;\n  const [card, setCard] = useState(null);\n  const [modal, setModal] = useState(false);\n  const [load, setLoad] = useState(true);\n  const back = useHistory();\n  useEffect(async () => {\n    if (!(await base.getOneProduct(match.params.id, setCard, null))) back.push(props.location.back, props.location.state);\n    setLoad(false);\n  }, []);\n  useEffect(() => {\n    if (card) title(card.title);\n  }, [card]);\n\n  const handleDelete = async card => {\n    try {\n      await base.productDelete(card);\n      back.push(props.location.back, props.location.state);\n    } catch (ex) {\n      setModal(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"screen\",\n    children: [load && /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 22\n    }, this), history.location.back && /*#__PURE__*/_jsxDEV(NavLink, {\n      to: {\n        pathname: history.location.back,\n        state: history.location.state\n      },\n      children: /*#__PURE__*/_jsxDEV(Forms.Back, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 17\n    }, this), card && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"screen__container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"productDetails__image\",\n        children: /*#__PURE__*/_jsxDEV(ImageSlider, {\n          images: card.images,\n          handleClick: (i, index, arr) => renderImage(arr, index)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"productDetails__details\",\n        children: [card.author && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: card.author.login ? card.author.login : \"Undefined\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: time.getDate(card.date)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }, this), card.price !== 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"productDetails__image--price\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [card.price, \" z\\u0142\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"productDetails__text\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\" \", card.text]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: card.author && card.author.phone && /*#__PURE__*/_jsxDEV(\"a\", {\n          href: `tel:${card.author.phone}`,\n          children: \"CLICK TO CALL\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }, this), modal && /*#__PURE__*/_jsxDEV(AcceptModal, {\n        close: setModal,\n        accept: () => {\n          handleDelete(card);\n          setLoad(true);\n        },\n        title: `${config.info.deleteAcceptConfirmation} ${card.title}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 25\n      }, this), card.author && user && user._id === card.author._id && !modal && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"productDetails__buttons\",\n        children: [/*#__PURE__*/_jsxDEV(NavLink, {\n          className: \"buttonLink\",\n          to: {\n            pathname: `edit/${card._id}`,\n            state: history.location.state,\n            back: history.location.back\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"actionBtn edit\",\n            children: config.buttons.edit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"actionBtn delete\",\n          onClick: () => setModal(true),\n          children: config.buttons.remove\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ProductDetails, \"mGwbMBdNGZ4RQo+transjbZh5V8=\", false, function () {\n  return [useHistory];\n});\n\n_c = ProductDetails;\nexport default ProductDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductDetails\");","map":{"version":3,"sources":["C:/dev/TESTY/TEST NATIVE/bazar/src/app/components/shop/productDetails.jsx"],"names":["React","useEffect","useState","ImageSlider","AcceptModal","Forms","time","base","NavLink","Spinner","useHistory","config","ProductDetails","props","user","renderImage","title","match","history","card","setCard","modal","setModal","load","setLoad","back","getOneProduct","params","id","push","location","state","handleDelete","productDelete","ex","pathname","images","i","index","arr","author","login","getDate","date","price","text","phone","info","deleteAcceptConfirmation","_id","buttons","edit","remove"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nimport ImageSlider from \"../common/imageSlider\";\r\nimport AcceptModal from \"../common/modal\";\r\n\r\nimport * as Forms from \"../common/form/forms\";\r\nimport * as time from \"../../../methods/time\";\r\nimport * as base from \"../../../methods/data\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport Spinner from \"./../common/spinner\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport config from \"../../config/config.json\";\r\n\r\nfunction ProductDetails(props) {\r\n    const { user, renderImage, title, match, history } = props;\r\n    const [card, setCard] = useState(null);\r\n    const [modal, setModal] = useState(false);\r\n    const [load, setLoad] = useState(true);\r\n    const back = useHistory();\r\n\r\n    useEffect(async () => {\r\n        if (!(await base.getOneProduct(match.params.id, setCard, null)))\r\n            back.push(props.location.back, props.location.state);\r\n        setLoad(false);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (card) title(card.title);\r\n    }, [card]);\r\n\r\n    const handleDelete = async (card) => {\r\n        try {\r\n            await base.productDelete(card);\r\n            back.push(props.location.back, props.location.state);\r\n        } catch (ex) {\r\n            setModal(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <main className=\"screen\">\r\n            {load && <Spinner />}\r\n\r\n            {history.location.back && (\r\n                <NavLink\r\n                    to={{\r\n                        pathname: history.location.back,\r\n                        state: history.location.state,\r\n                    }}\r\n                >\r\n                    <Forms.Back />\r\n                </NavLink>\r\n            )}\r\n            {card && (\r\n                <div className=\"screen__container\">\r\n                    <div className=\"productDetails__image\">\r\n                        <ImageSlider\r\n                            images={card.images}\r\n                            handleClick={(i, index, arr) =>\r\n                                renderImage(arr, index)\r\n                            }\r\n                        />\r\n                    </div>\r\n                    <div className=\"productDetails__details\">\r\n                        {card.author && (\r\n                            <p>\r\n                                {card.author.login\r\n                                    ? card.author.login\r\n                                    : \"Undefined\"}\r\n                            </p>\r\n                        )}\r\n                        <p>{time.getDate(card.date)}</p>\r\n                    </div>\r\n                    {card.price !== 0 && (\r\n                        <div className=\"productDetails__image--price\">\r\n                            <span>{card.price} zł</span>\r\n                        </div>\r\n                    )}\r\n                    <div className=\"productDetails__text\">\r\n                        <p> {card.text}</p>\r\n                    </div>\r\n                    <div className=\"\">\r\n                        {card.author && card.author.phone && (\r\n                            <a href={`tel:${card.author.phone}`}>\r\n                                CLICK TO CALL\r\n                            </a>\r\n                        )}\r\n                    </div>\r\n\r\n                    {modal && (\r\n                        <AcceptModal\r\n                            close={setModal}\r\n                            accept={() => {\r\n                                handleDelete(card);\r\n                                setLoad(true);\r\n                            }}\r\n                            title={`${config.info.deleteAcceptConfirmation} ${card.title}`}\r\n                        />\r\n                    )}\r\n                    {card.author &&\r\n                        user &&\r\n                        user._id === card.author._id &&\r\n                        !modal && (\r\n                            <div className=\"productDetails__buttons\">\r\n                                <NavLink\r\n                                    className=\"buttonLink\"\r\n                                    to={{\r\n                                        pathname: `edit/${card._id}`,\r\n                                        state: history.location.state,\r\n                                        back: history.location.back,\r\n                                    }}\r\n                                >\r\n                                    <button className=\"actionBtn edit\">\r\n                                        {config.buttons.edit}\r\n                                    </button>\r\n                                </NavLink>\r\n                                <button\r\n                                    className=\"actionBtn delete\"\r\n                                    onClick={() => setModal(true)}\r\n                                >\r\n                                    {config.buttons.remove}\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                </div>\r\n            )}\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default ProductDetails;\r\n"]},"metadata":{},"sourceType":"module"}