{"ast":null,"code":"import { toast, ToastContainer } from \"react-toastify\";\nimport * as imagesBase from \"../api/images\";\n\nasync function handleSave(item, edit, image, base, redirect) {\n  if (image.length > 0 && typeof image[0] !== \"string\") {\n    if (edit) {\n      edit.images.forEach(img => imagesBase.remove(img));\n    }\n\n    const images = await uploadImage(image);\n    if (images.ok) item.images = images.data;else return toast.error(\"Error occured on saving! first\");\n  }\n\n  if (edit) {\n    item._id = edit._id;\n    const response = await base.edit(item);\n    response.ok ? props.history.push(redirect) : toast.error(\"Error occured on saving! second\");\n    return;\n  }\n\n  const response = await base.add(item);\n  response.ok ? props.history.push(redirect) : toast.error(\"Error occured on saving! third\");\n}\n\nconst uploadImage = image => {\n  const form = new FormData();\n  image.forEach(img => form.append(\"image\", img));\n  return imagesBase.add(form);\n};\n\nexport { handleSave };","map":{"version":3,"sources":["C:/dev/TESTY/TEST NATIVE/bazar/src/methods/save.js"],"names":["toast","ToastContainer","imagesBase","handleSave","item","edit","image","base","redirect","length","images","forEach","img","remove","uploadImage","ok","data","error","_id","response","props","history","push","add","form","FormData","append"],"mappings":"AAAA,SAASA,KAAT,EAAgBC,cAAhB,QAAsC,gBAAtC;AACA,OAAO,KAAKC,UAAZ,MAA4B,eAA5B;;AAEA,eAAeC,UAAf,CAA0BC,IAA1B,EAAgCC,IAAhC,EAAsCC,KAAtC,EAA6CC,IAA7C,EAAmDC,QAAnD,EAA6D;AACzD,MAAIF,KAAK,CAACG,MAAN,GAAe,CAAf,IAAoB,OAAOH,KAAK,CAAC,CAAD,CAAZ,KAAoB,QAA5C,EAAsD;AAClD,QAAID,IAAJ,EAAU;AACNA,MAAAA,IAAI,CAACK,MAAL,CAAYC,OAAZ,CAAqBC,GAAD,IAASV,UAAU,CAACW,MAAX,CAAkBD,GAAlB,CAA7B;AACH;;AAED,UAAMF,MAAM,GAAG,MAAMI,WAAW,CAACR,KAAD,CAAhC;AACA,QAAII,MAAM,CAACK,EAAX,EAAeX,IAAI,CAACM,MAAL,GAAcA,MAAM,CAACM,IAArB,CAAf,KACK,OAAOhB,KAAK,CAACiB,KAAN,CAAY,gCAAZ,CAAP;AACR;;AAED,MAAIZ,IAAJ,EAAU;AACND,IAAAA,IAAI,CAACc,GAAL,GAAWb,IAAI,CAACa,GAAhB;AACA,UAAMC,QAAQ,GAAG,MAAMZ,IAAI,CAACF,IAAL,CAAUD,IAAV,CAAvB;AACAe,IAAAA,QAAQ,CAACJ,EAAT,GACMK,KAAK,CAACC,OAAN,CAAcC,IAAd,CAAmBd,QAAnB,CADN,GAEMR,KAAK,CAACiB,KAAN,CAAY,iCAAZ,CAFN;AAIA;AACH;;AAED,QAAME,QAAQ,GAAG,MAAMZ,IAAI,CAACgB,GAAL,CAASnB,IAAT,CAAvB;AAEAe,EAAAA,QAAQ,CAACJ,EAAT,GACMK,KAAK,CAACC,OAAN,CAAcC,IAAd,CAAmBd,QAAnB,CADN,GAEMR,KAAK,CAACiB,KAAN,CAAY,gCAAZ,CAFN;AAGH;;AAED,MAAMH,WAAW,GAAIR,KAAD,IAAW;AAC3B,QAAMkB,IAAI,GAAG,IAAIC,QAAJ,EAAb;AACAnB,EAAAA,KAAK,CAACK,OAAN,CAAeC,GAAD,IAASY,IAAI,CAACE,MAAL,CAAY,OAAZ,EAAqBd,GAArB,CAAvB;AAEA,SAAOV,UAAU,CAACqB,GAAX,CAAeC,IAAf,CAAP;AACH,CALD;;AAOA,SAASrB,UAAT","sourcesContent":["import { toast, ToastContainer } from \"react-toastify\";\r\nimport * as imagesBase from \"../api/images\";\r\n\r\nasync function handleSave(item, edit, image, base, redirect) {\r\n    if (image.length > 0 && typeof image[0] !== \"string\") {\r\n        if (edit) {\r\n            edit.images.forEach((img) => imagesBase.remove(img));\r\n        }\r\n\r\n        const images = await uploadImage(image);\r\n        if (images.ok) item.images = images.data;\r\n        else return toast.error(\"Error occured on saving! first\");\r\n    }\r\n\r\n    if (edit) {\r\n        item._id = edit._id;\r\n        const response = await base.edit(item);\r\n        response.ok\r\n            ? props.history.push(redirect)\r\n            : toast.error(\"Error occured on saving! second\");\r\n\r\n        return;\r\n    }\r\n\r\n    const response = await base.add(item);\r\n\r\n    response.ok\r\n        ? props.history.push(redirect)\r\n        : toast.error(\"Error occured on saving! third\");\r\n}\r\n\r\nconst uploadImage = (image) => {\r\n    const form = new FormData();\r\n    image.forEach((img) => form.append(\"image\", img));\r\n\r\n    return imagesBase.add(form);\r\n};\r\n\r\nexport { handleSave };\r\n"]},"metadata":{},"sourceType":"module"}