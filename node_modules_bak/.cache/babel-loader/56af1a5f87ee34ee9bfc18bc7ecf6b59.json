{"ast":null,"code":"import * as noticesBase from \"../services/notices\";\nimport * as productsBase from \"../services/products\";\nimport * as categoriesBase from \"../services/categories\";\nimport { cubby } from \"./cubby\";\n\nconst checkBase = async (cubby, base) => {\n  const maxTime = 600000;\n\n  if (!cubby.data || cubby.time - Date.now() > maxTime) {\n    cubby.time = Date.now();\n    const result = await base.get();\n    let final;\n    final = cubby.data = result.data;\n    return final;\n  } else return cubby.data;\n};\n\nconst getOne = async (id, base, setData = null, setImage = null) => {\n  if (id) {\n    const value = await base.filter(async item => item._id === id);\n    if (!setData) return value;\n    console.log(\"GET ONE\", value, value[0], id);\n    setData(value[0]);\n    if (setImage) setImage(value[0].images);\n  }\n\n  return true;\n};\n\nconst getOneNotice = async (id, setData, setImage) => {\n  const notices = await checkBase(cubby.notices, noticesBase);\n  return await getOne(id, notices, setData, setImage);\n};\n\nconst getOneProduct = async (id, setData, setImage) => {\n  const products = await checkBase(cubby.products, productsBase);\n  return await getOne(id, products, setData, setImage);\n};\n\nconst getNotices = async (setData = null) => {\n  const notices = await checkBase(cubby.notices, noticesBase);\n  if (setData) return setData(notices);\n  return notices;\n};\n\nconst getProducts = async (setData = null) => {\n  const products = await checkBase(cubby.products, productsBase);\n  if (setData) return setData(products);\n  return products;\n};\n\nconst getCategories = async (withAll = false, setData = false) => {\n  const categories = await checkBase(cubby.categories, categoriesBase);\n  const result = withAll ? [{\n    _id: \"0\",\n    name: \"wszystkie\"\n  }, ...categories] : [...categories];\n  if (setData) return setData(result);\n  return result;\n};\n\nexport { getOneNotice, getOneProduct, getNotices, getProducts, getCategories };","map":{"version":3,"sources":["C:/dev/TESTY/TEST NATIVE/bazar/src/methods/load.js"],"names":["noticesBase","productsBase","categoriesBase","cubby","checkBase","base","maxTime","data","time","Date","now","result","get","final","getOne","id","setData","setImage","value","filter","item","_id","console","log","images","getOneNotice","notices","getOneProduct","products","getNotices","getProducts","getCategories","withAll","categories","name"],"mappings":"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","sourcesContent":["import * as noticesBase from \"../services/notices\";\r\nimport * as productsBase from \"../services/products\";\r\nimport * as categoriesBase from \"../services/categories\";\r\nimport { cubby } from \"./cubby\";\r\n\r\nconst checkBase = async (cubby, base) => {\r\n    const maxTime = 600000;\r\n    if (!cubby.data || cubby.time - Date.now() > maxTime) {\r\n        cubby.time = Date.now();\r\n        const result = await base.get();\r\n        let final;\r\n        final = cubby.data = result.data;\r\n        return final;\r\n    } else return cubby.data;\r\n};\r\n\r\nconst getOne = async (id, base, setData = null, setImage = null) => {\r\n    if (id) {\r\n        const value = await base.filter(async (item) => item._id === id);\r\n        if (!setData) return value;\r\n\r\n        console.log(\"GET ONE\", value, value[0], id);\r\n        setData(value[0]);\r\n        if (setImage) setImage(value[0].images);\r\n    }\r\n    return true;\r\n};\r\n\r\nconst getOneNotice = async (id, setData, setImage) => {\r\n    const notices = await checkBase(cubby.notices, noticesBase);\r\n    return await getOne(id, notices, setData, setImage);\r\n};\r\n\r\nconst getOneProduct = async (id, setData, setImage) => {\r\n    const products = await checkBase(cubby.products, productsBase);\r\n    return await getOne(id, products, setData, setImage);\r\n};\r\n\r\nconst getNotices = async (setData = null) => {\r\n    const notices = await checkBase(cubby.notices, noticesBase);\r\n    if (setData) return setData(notices);\r\n    return notices;\r\n};\r\n\r\nconst getProducts = async (setData = null) => {\r\n    const products = await checkBase(cubby.products, productsBase);\r\n    if (setData) return setData(products);\r\n    return products;\r\n};\r\n\r\nconst getCategories = async (withAll = false, setData = false) => {\r\n    const categories = await checkBase(cubby.categories, categoriesBase);\r\n    const result = withAll\r\n        ? [{ _id: \"0\", name: \"wszystkie\" }, ...categories]\r\n        : [...categories];\r\n\r\n    if (setData) return setData(result);\r\n    return result;\r\n};\r\n\r\nexport { getOneNotice, getOneProduct, getNotices, getProducts, getCategories };\r\n"]},"metadata":{},"sourceType":"module"}