{"ast":null,"code":"import { toast } from \"react-toastify\";\nimport * as imagesBase from \"../services/images\";\nimport * as noticeBase from \"../services/notices\";\nimport * as productBase from \"../services/products\";\n\nconst noticeSave = async (item, edit, image) => {\n  return await save(item, edit, image, noticeBase);\n};\n\nconst productSave = async (item, edit, image) => {\n  item.price = await checkPrice(item.price);\n  return await save(item, edit, image, productBase);\n};\n\nconst save = async (item, edit, image, base) => {\n  item.images = await checkImage(image);\n  const form = new FormData();\n  item.images.new.forEach(img => form.append(\"file\", img));\n  form.append(\"title\", item.title);\n  form.append(\"text\", item.text);\n  form.append(\"price\", item.price);\n  form.append(\"category\", item.category);\n\n  if (edit) {\n    item.images.old.forEach(img => form.append(\"images\", img));\n    form.append(\"_id\", edit._id);\n    const response = await base.edit(item);\n    if (!response.ok) throw toast.error(\"Error occured on saving!\");\n    return response.data;\n  }\n\n  const response = await base.add(form);\n  if (!response.ok) throw toast.error(response.data);\n  return response.data;\n};\n\nconst checkImage = async images => {\n  if (!(images.length > 0)) return [];\n  const result = {\n    old: [],\n    new: []\n  };\n  images.forEach(img => {\n    typeof img === \"string\" ? result.old.push(img) : result.new.push(img);\n  });\n  return result;\n};\n\nconst checkPrice = async price => {\n  try {\n    if (price) {\n      price = price.trim();\n      price = +parseFloat(price).toFixed(2);\n    } else {\n      price = 0;\n    }\n  } catch (e) {}\n\n  price = price.toString();\n  return price;\n};\n\nexport { noticeSave, productSave };","map":{"version":3,"sources":["C:/dev/TESTY/TEST NATIVE/bazar/src/methods/save.js"],"names":["toast","imagesBase","noticeBase","productBase","noticeSave","item","edit","image","save","productSave","price","checkPrice","base","images","checkImage","form","FormData","new","forEach","img","append","title","text","category","old","_id","response","ok","error","data","add","length","result","push","trim","parseFloat","toFixed","e","toString"],"mappings":"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","sourcesContent":["import { toast } from \"react-toastify\";\r\n\r\nimport * as imagesBase from \"../services/images\";\r\nimport * as noticeBase from \"../services/notices\";\r\nimport * as productBase from \"../services/products\";\r\n\r\nconst noticeSave = async (item, edit, image) => {\r\n    return await save(item, edit, image, noticeBase);\r\n};\r\n\r\nconst productSave = async (item, edit, image) => {\r\n    item.price = await checkPrice(item.price);\r\n    return await save(item, edit, image, productBase);\r\n};\r\n\r\nconst save = async (item, edit, image, base) => {\r\n    item.images = await checkImage(image);\r\n\r\n    const form = new FormData();\r\n    item.images.new.forEach((img) => form.append(\"file\", img));\r\n    form.append(\"title\", item.title);\r\n    form.append(\"text\", item.text);\r\n    form.append(\"price\", item.price);\r\n    form.append(\"category\", item.category);\r\n\r\n    if (edit) {\r\n        item.images.old.forEach((img) => form.append(\"images\", img));\r\n        form.append(\"_id\", edit._id);\r\n        const response = await base.edit(item);\r\n        if (!response.ok) throw toast.error(\"Error occured on saving!\");\r\n        return response.data;\r\n    }\r\n\r\n    const response = await base.add(form);\r\n    if (!response.ok) throw toast.error(response.data);\r\n    return response.data;\r\n};\r\n\r\nconst checkImage = async (images) => {\r\n    if (!(images.length > 0)) return [];\r\n\r\n    const result = { old: [], new: [] };\r\n\r\n    images.forEach((img) => {\r\n        typeof img === \"string\" ? result.old.push(img) : result.new.push(img);\r\n    });\r\n\r\n    return result;\r\n};\r\n\r\nconst checkPrice = async (price) => {\r\n    try {\r\n        if (price) {\r\n            price = price.trim();\r\n            price = +parseFloat(price).toFixed(2);\r\n        } else {\r\n            price = 0;\r\n        }\r\n    } catch (e) {}\r\n    price = price.toString();\r\n    return price;\r\n};\r\n\r\nexport { noticeSave, productSave };\r\n"]},"metadata":{},"sourceType":"module"}